## 第七章 路由协议

### 路由器与交换机

根据 OSI模型的网络体系划分，自底向上，**路由器 工作在第三层（网络层）**，而**交换机工作在第二层（链路层）**（目前有更加高级的三层交换机，四层交换机，甚至还有七层交换机）

<div>
    <image src="../res/img/routexchange.jpg"></image>
</div>

路由器内有一份路由表，里面有它的寻址信息（就像是一张地图），它收到网络层的数据报后，会根据路由表和选路算法将数据报转发到下一站（可能是路由器、交换机、目的主机）

交换机内有一张MAC表，里面存放着和它相连的所有设备的MAC地址，它会根据收到的数据帧的首部信息内的目的MAC地址在自己的表中查找，如果有就转发，如果没有就放弃.

### 路由协议的定义

互联网是由路由器连接的网络组合而成的。为了能让数据包正确的到达目标主机，路由器必须在途中进行正确地转发。这种向 “正确的方向” 转发数据所进行的处理叫做路由控制或路由。

路由器根据路由控制表（Routing Table）转发数据包。它根据所收到的数据包中目标主机的IP地址与路由控制表的比较得出下一个应该接收的路由器。

路由控制分为静态和动态两种类型。

### 路由控制的范围

人们根据路由控制的范围常使用 IGP （Interior Gateway Protocol）和 EGP （Exterior Gateway Protocol）两种类型的路由协议。

### 路由算法

#### 距离向量算法

距离向量算法（DV）是指根据距离（代价）和方向决定目标网络或目标主机位置的一种方法。

路由器之间可以互换目标网络的方向及其距离的相关信息，并以这些信息为基础制作路由控制表。这种方法在处理上比较简单，不过由于只有距离和方向信息，所以当网络结构变得分外复杂时，在获得稳定的路由信息之前需要消耗一定时间，也极易发生路由循环等问题。

#### 链路状态算法

链路状态算法是指路由器在了解网络整体连接状态的基础上生成路由控制表的一种方法。该方法中，每个路由器必须保持同样的信息才能进行正确的路由选择。